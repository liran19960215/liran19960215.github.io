<!DOCTYPE html>


<html lang="en">


<head>
  <meta charset="utf-8" />
    
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
     Cherry Blog
  </title>
  <meta name="generator" content="hexo-theme-ayer">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/dist/main.css">

  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css">

  
<link rel="stylesheet" href="/css/custom.css">

  
  
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

  
  

  

</head>

</html>

<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
      
      <a class="forkMe" href="https://github.com/Shen-Yu/hexo-theme-ayer"
        target="_blank"><img width="149" height="149" src="/images/forkme.png"
          class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1"></a>
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover1.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Cherry Blog</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  <article class="articles">
    
    
    
    
    <article
  id="blog-css中的伪类和伪元素"
  class="article article-type-blog"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/10/17/css%E4%B8%AD%E7%9A%84%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0/"
    >css中的伪类和伪元素</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/10/17/css%E4%B8%AD%E7%9A%84%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0/" class="article-date">
  <time datetime="2020-10-17T08:14:11.000Z" itemprop="datePublished">2020-10-17</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/css/">css</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="1-伪类与伪元素的区别"><a href="#1-伪类与伪元素的区别" class="headerlink" title="1. 伪类与伪元素的区别"></a>1. 伪类与伪元素的区别</h2><h3 id="1）-表示方法不同"><a href="#1）-表示方法不同" class="headerlink" title="1） 表示方法不同"></a>1） 表示方法不同</h3><p>css2中伪类、伪元素都是用<font color="orange"> : </font>表示，css2.1后规定，伪类用<font color="orange"> : </font>表示，伪元素用<font color="orange"> :: </font>表示，浏览器同样接受css2时代已经存在的伪元素(<font color="orange">:before, :after, :first-line, :first-letter等</font>)的单冒号的写法。对于css2之后的所有新增的伪元素(如<font color="orange">::selection</font>), 应该采用双冒号的写法。但是因为兼容性问题，大部分还是用的单冒号。   </p>
<h3 id="2）定义不同"><a href="#2）定义不同" class="headerlink" title="2）定义不同"></a>2）定义不同</h3><p><strong>伪类</strong>: 核心是选择那些不能够被普通选择器选择的文档之外的元素，比如<font color="orange"> :hover </font>。<br><strong>伪元素</strong>: 核心是需要创建通常不存在与文档中的元素，比如<font color="orange"> ::before </font>。</p>
<h3 id="3-种类不同"><a href="#3-种类不同" class="headerlink" title="3) 种类不同"></a>3) 种类不同</h3><ul>
<li><p>伪类种类    </p>
<center><img src="https://res.cloudinary.com/dg7gqrbda/image/upload/v1603102850/blog/css%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0-7_jnoyze.png"></scr></center>
常用的伪类有下面两种：  
</li>
<li><p>UI伪类：会在html元素处于某种状态时（比如鼠标指针位于链接式上），为该元素应用css样式；</p>
</li>
<li><p>结构化伪类：会在标记中存在某种结构上的关系时（如某个元素的一组元素中的第一个或者最后一个），为响应元素应用css样式。</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>UI伪类</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>:active</td>
<td>将样式添加到被激活的元素</td>
</tr>
<tr>
<td>:focus</td>
<td>将样式添加到被选中的元素</td>
</tr>
<tr>
<td>:hover</td>
<td>当鼠标悬浮在元素上方时，向元素添加样式</td>
</tr>
<tr>
<td>:link</td>
<td>将特殊的样式添加到未被访问过的链接</td>
</tr>
<tr>
<td>:visited</td>
<td>将特殊的样式添加到被访问过的链接</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>结构伪类</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>:first-child</td>
<td>将特殊的样式添加到元素的第一个子元素</td>
</tr>
<tr>
<td>:last-child</td>
<td>选择父元素的倒数第一个子元素，相当于nth-last-child(1)</td>
</tr>
<tr>
<td>:nth-child(n)</td>
<td>选择父元素的第n个子元素，n从1开始计算</td>
</tr>
<tr>
<td>:nth-last-child(n)</td>
<td>选择父元素的倒数第n个自元素，n从1开始计算</td>
</tr>
<tr>
<td>:first-of-type</td>
<td>选择父元素下同种标签的第一个元素，相当于nth-of-type(1)</td>
</tr>
<tr>
<td>:last-of-type</td>
<td>选择父元素下同种标签的倒数第一个元素，相当于nth-last-of-type(1)</td>
</tr>
<tr>
<td>:nth-of-type(n)</td>
<td>选择使用同种标签的第n个元素</td>
</tr>
<tr>
<td>:nth-last-of-type(n)</td>
<td>选择同种标签的倒数第一个元素</td>
</tr>
<tr>
<td>:only-child</td>
<td>选择父元素下仅有的一个子元素</td>
</tr>
<tr>
<td>:empty</td>
<td>选择空结点，即没有子元素的元素，而且该元素也不包含任何文本节点</td>
</tr>
<tr>
<td>:root</td>
<td>选择文档的根元素，对于html文档，根元素永远是html</td>
</tr>
</tbody></table>
<ul>
<li>伪元素种类 </li>
</ul>
<table>
<thead>
<tr>
<th>UI伪类</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>::first-letter</td>
<td>向文本的第一个字幕添加特殊样式</td>
</tr>
<tr>
<td>::first-line</td>
<td>向文本的首行添加特殊样式</td>
</tr>
<tr>
<td>::before</td>
<td>在元素之前添加内容</td>
</tr>
<tr>
<td>::after</td>
<td>在元素之后添加内容</td>
</tr>
<tr>
<td>::selection</td>
<td>匹配突出选中的文本（用鼠标选择文本时的文本），该伪元素只接受两个属性background/color</td>
</tr>
</tbody></table>
<h2 id="2-优缺点"><a href="#2-优缺点" class="headerlink" title="2. 优缺点"></a>2. 优缺点</h2><p>伪元素的优缺点</p>
<ul>
<li>优点  <ol>
<li>不占用DOM节点，减少DOM节点数；</li>
<li>让css帮助解决了一部分javascript问题，简化了开发；</li>
<li>不仅块级元素可以设置伪元素，大部分行级元素也可以避免增加毫无意义的页面元素。   </li>
</ol>
</li>
<li>缺点<ol>
<li>不利于调试；</li>
<li>伪元素不真正在文档内容中提现，只是在视觉效果上体现，所以不能给伪元素添加具有实际意义的内容，这部分内容不会被搜索引擎抓取。</li>
</ol>
</li>
</ul>
<h2 id="3-注意事项"><a href="#3-注意事项" class="headerlink" title="3. 注意事项"></a>3. 注意事项</h2><ul>
<li>伪元素如果没有设置content属性(可为空值)，那么伪元素是无用的(可以将伪元素的内容设置为空)，content插入的内容默认是inline元素，可以通过display:block改变；</li>
<li>插入的内容在页面的源码里是不可见的，只能在css里面可见；</li>
<li>插入的伪元素默认情况是内联元素，因此为了给插入元素赋予高度、外边距、填充等等，必须显示定义它是一个块级元素；</li>
<li>典型的css继承规则适用于插入的伪元素，比如插入的字体，伪元素会像其他元素一样继承这些字体，同样的，伪元素不会继承没有自然继承自父元素的样式(如padding和margin)。</li>
</ul>
<h2 id="4-实战场景"><a href="#4-实战场景" class="headerlink" title="4. 实战场景"></a>4. 实战场景</h2><h3 id="伪类的使用场景"><a href="#伪类的使用场景" class="headerlink" title="伪类的使用场景"></a>伪类的使用场景</h3><ol>
<li>表单校验<br>表单的校验中，常用到<font color="orange"> :required、:valid、:invalid </font>这三个伪类：</li>
</ol>
<ul>
<li>:required，指具有required属性的表单元素；</li>
<li>:valid，指匹配指定要求的表单元素；</li>
<li>:invalid，指不匹配指定要求的表单元素。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>input中类型为email的校验<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>符合email校验规则<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">required</span> <span class="attr">placeholder</span>=<span class="string">"请输入"</span> <span class="attr">value</span>=<span class="string">"24238477@qq.com"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>不符合email校验规则<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">required</span> <span class="attr">placeholder</span>=<span class="string">"请输入"</span> <span class="attr">value</span>=<span class="string">"lalala"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>有required标识，但未填写<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"email"</span> <span class="attr">required</span> <span class="attr">placeholder</span>=<span class="string">"请输入"</span> <span class="attr">value</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">// css</span><br><span class="line">input &#123;</span><br><span class="line">  &amp;:valid &#123;</span><br><span class="line">    border-color: green;</span><br><span class="line">    box-shadow: inset 5px 0 0 green;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;:invalid &#123;</span><br><span class="line">    border-color: red;</span><br><span class="line">    box-shadow: inset 5px 0 0 red;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;:required &#123;</span><br><span class="line">    border-color: red;</span><br><span class="line">    box-shadow: inset 5px 0 0 red;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：   </p>
<center><img src="https://res.cloudinary.com/dg7gqrbda/image/upload/v1603092720/blog/css%E4%BC%AA%E7%B1%BB%E4%B8%8E%E4%BC%AA%E5%85%83%E7%B4%A0_yflmaj.png" width="50%"></img></center>

<ol start="2">
<li><p>折叠面板<br>之前只能通过js来实现折叠面板的显示或隐藏，现在可以通过目标伪类<font color="orange"> :target </font>来实现。:target是文档的内部链接，即URL后面跟有锚名称 #，指向文档内某个具体的元素。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"t-collapse"</span>&gt;</span></span><br><span class="line">  // 在url最后添加 #modal1，使得target生效</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"collapse-target"</span> <span class="attr">href</span>=<span class="string">"#modal1"</span>&gt;</span>target 1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"collapse-body"</span> <span class="attr">id</span>=<span class="string">"modal1"</span>&gt;</span></span><br><span class="line">  // 将url的#modal1 变为 #，使得target失效</span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"collapse-close"</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>target 1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>...<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// css</span><br><span class="line">.t-collapse &#123;</span><br><span class="line">  &gt;.collapse-body &#123;</span><br><span class="line">    &amp;:target &#123;</span><br><span class="line">      display: block;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>定位第n个元素<br>可以通过<font color="orange"> :nth-child(n) </font>与<font color="orange"> :nth-of-type(n) </font>来定位一系列标签中的某个元素。区别：  </p>
</li>
</ol>
<ul>
<li>n可以是&gt;0的数字，或者类似2n+1的表达式，再或者是even/odd；</li>
<li>:nth-of-type(n)除了关注n，还需要关注最前面的类型；</li>
<li>:nth-child(n)关注的是父元素下的第n个子元素，与类型无关。<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第一个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第二个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第三个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第四个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>第五个段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<center><img src="https://res.cloudinary.com/dg7gqrbda/image/upload/v1603095137/blog/css%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0-1_zoxtzj.png"></img></center>

</li>
</ul>
<h3 id="伪元素的使用场景"><a href="#伪元素的使用场景" class="headerlink" title="伪元素的使用场景"></a>伪元素的使用场景</h3><ol>
<li><p>清除浮动<br>通常我们清除浮动的方式就是在浮动元素后面添加一个空的div标签，然后设置它的清除浮动样式。如果使用伪元素::after，就不需要添加无意义的div标签在html中。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ul::after &#123;</span><br><span class="line">  clear: both;</span><br><span class="line">  content: '';</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>美化选中的文本<br>在网页中，默认的划词效果是原字色保持不变，划过时背景变为蓝底色。我们可以通过<font color="orange"> ::selection </font>来实现定制。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Custom text selection color<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// css</span><br><span class="line">::selection &#123;</span><br><span class="line">  color: red;</span><br><span class="line">  background-color: yellow;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>效果如下：  </p>
<center><img src="https://res.cloudinary.com/dg7gqrbda/image/upload/v1603096679/blog/css%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0-2_pdwc8z.png" width="50%"></img></center>
</li>
<li><p>::before和::after<br>::before和::after必须配合content属性来使用，content用来定义插入的内容，必须有值，至少是空。默认情况下，伪元素的display的默认值是inline，可以通过设置display:block来改变其显示。content可以取以下值：</p>
</li>
</ol>
<ul>
<li><p>string  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span><span class="selector-pseudo">::before</span>&#123;</span></span><br><span class="line">    content: "《";</span><br><span class="line">    color: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">p</span><span class="selector-pseudo">::after</span>&#123;</span></span><br><span class="line">    content: "》";</span><br><span class="line">    color: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>平凡的世界<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>效果： 《平凡的世界》</p>
</li>
<li><p>attr()<br>通过attr()调用当前元素的属性，比如将图片alt提示文字或者链接的href地址显示出来。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">a</span><span class="selector-pseudo">::after</span>&#123;</span></span><br><span class="line">        content: "("attr(href)")";</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>效果：</p>
<center><img src="https://res.cloudinary.com/dg7gqrbda/image/upload/v1603102971/blog/css%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0-8_kv5zva.png" width="50%"></img></center>
</li>
<li><p>rl()/uri()<br>用于引用媒体文件。<br>举例：“百度”文字前面给出一张图片，后面给出herf属性。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">a</span><span class="selector-pseudo">::before</span>&#123;</span></span><br><span class="line">        content: url("https://www.baidu.com/img/baidu_jgylogo3.gif");</span><br><span class="line">    &#125;</span><br><span class="line"><span class="css">  <span class="selector-tag">a</span><span class="selector-pseudo">::after</span>&#123;</span></span><br><span class="line">      content: "("attr(href)")";</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.baidu.com"</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">```   </span><br><span class="line">效果：  </span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://res.cloudinary.com/dg7gqrbda/image/upload/v1603098415/blog/css%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0-3_n7vtyw.png"</span> <span class="attr">width</span>=<span class="string">"50%"</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"></span><br><span class="line">+ counter()   </span><br><span class="line">调用计数器，可以不使用列表元素实现序号功能。配合counter-increment和counter-reset属性使用。</span><br><span class="line">```html</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">      body&#123;</span><br><span class="line">          counter-reset: section;</span><br><span class="line">      &#125;</span><br><span class="line">      h1&#123;</span><br><span class="line">          counter-reset: subsection;</span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-tag">h1</span><span class="selector-pseudo">:before</span>&#123;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">counter-increment</span><span class="selector-pseudo">:section</span>;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">content</span><span class="selector-pseudo">:counter(section)</span> "、";</span></span><br><span class="line">      &#125;</span><br><span class="line"><span class="css">      <span class="selector-tag">h2</span><span class="selector-pseudo">:before</span>&#123;</span></span><br><span class="line"><span class="css">          <span class="selector-tag">counter-increment</span><span class="selector-pseudo">:subsection</span>;</span></span><br><span class="line">          content: counter(section) "." counter(subsection) "、";</span><br><span class="line">      &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>HTML tutorials<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>HTML Tutorial<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>XHTML Tutorial<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>CSS Tutorial<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Scripting tutorials<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>VBScript<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>XML tutorials<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>XML<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>XSL<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>效果：</p>
<center><img src="https://res.cloudinary.com/dg7gqrbda/image/upload/v1603098808/blog/css%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0-4_iyhcbv.png" width="50%"></img></center>
</li>
<li><p>给blockquote添加引号<br>有时会用到给blockquote引用段添加巨大的引号作为背景，可以用::before来代替background。好处是既可以给背景留下空间，还可以直接使用文字而非图片。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">blockquote</span><span class="selector-pseudo">::before</span> &#123;</span></span><br><span class="line">    content: open-quote;</span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#ddd</span>;</span></span><br><span class="line">    z-index: -1;</span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span><span class="selector-pseudo">:80px</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span>&gt;</span>引用一个段落,双引号用::before伪元素实现<span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>效果：</p>
<center><img src="https://res.cloudinary.com/dg7gqrbda/image/upload/v1603099099/blog/css%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0-5_ur2ypd.png" width="50%"></img></center>
</li>
<li><p>超链接特效<br>例：配合css定位实现鼠标hover时，超链接出现方括号的效果。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line">body&#123;</span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>: <span class="selector-id">#425a6c</span>;</span></span><br><span class="line">&#125;</span><br><span class="line">    a &#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    outline: none;</span><br><span class="line"><span class="css">    <span class="selector-tag">color</span>: <span class="selector-id">#fff</span>;</span></span><br><span class="line">    text-decoration: none;</span><br><span class="line">    font-size: 32px;</span><br><span class="line">    padding: 5px 20px;</span><br><span class="line">&#125;</span><br><span class="line"><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span>, <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123; <span class="attribute">position</span>: absolute; &#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::before</span> &#123; <span class="attribute">content</span>: <span class="string">"\5B"</span>; <span class="attribute">left</span>: -<span class="number">10px</span>; &#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span><span class="selector-pseudo">::after</span> &#123; <span class="attribute">content</span>: <span class="string">"\5D"</span>; <span class="attribute">right</span>:  -<span class="number">10px</span>; &#125;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span>鼠标移上去出现方括号<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>效果：</p>
<center><img src="https://res.cloudinary.com/dg7gqrbda/image/upload/v1603099604/blog/css%E4%BC%AA%E7%B1%BB%E5%92%8C%E4%BC%AA%E5%85%83%E7%B4%A0-6_chckls.png" width="50%"></img></center>

</li>
</ul>
<h2 id="5-总结"><a href="#5-总结" class="headerlink" title="5. 总结"></a>5. 总结</h2><ul>
<li>伪类和伪元素都是用来表示文档树以外的“元素”；</li>
<li>伪类和伪元素分别用<font color="orange"> : </font>和<font color="orange"> :: </font>表示；</li>
<li>最关键的区别是，如果没有伪类(伪元素), 是否需要添加元素才能达到目的，如果是则是伪元素，反之则是伪类；</li>
<li>伪类只要不是互斥，可以叠加使用；伪元素在一个选择器中只能出现一次，并且只能出现在末尾；</li>
<li>伪类与伪元素的优先级分别与类、标签的优先级相同。</li>
</ul>
<h2 id="参考博客："><a href="#参考博客：" class="headerlink" title="参考博客："></a>参考博客：</h2><p><a href="https://juejin.im/post/6844903810951806989" target="_blank" rel="noopener">伪类与伪元素的区别</a><br><a href="https://www.html.cn/qa/css3/17445.html" target="_blank" rel="noopener">css伪类的种类有哪些？</a><br><a href="https://juejin.im/post/6844903761891213320" target="_blank" rel="noopener">「前端面试题系列3」伪类与伪元素的区别及实战
</a><br><a href="https://www.cnblogs.com/guangzhou11/p/7360589.html" target="_blank" rel="noopener">CSS3 ::before和::after伪元素的实际应用</a><br><a href="https://juejin.im/post/6844903969752350727" target="_blank" rel="noopener">伪类与伪元素的区别</a></p>
 
      <!-- reward -->
      <!--  -->
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>

     
   
</article>

    
    <article
  id="blog-vue中iframe的应用"
  class="article article-type-blog"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/10/17/vue%E4%B8%ADiframe%E7%9A%84%E5%BA%94%E7%94%A8/"
    >vue中iframe的应用</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/10/17/vue%E4%B8%ADiframe%E7%9A%84%E5%BA%94%E7%94%A8/" class="article-date">
  <time datetime="2020-10-17T06:06:59.000Z" itemprop="datePublished">2020-10-17</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>最近项目中有个需求，就是将keynote中的ppt转成html，然后用iframe嵌入vue中，并在外部可以出发html上展示的ppt的上一页和下一页功能，这就涉及到vue和iframe之间的通信。记录一下。</p>
<p>先写一个简单到htmlDemo</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">"mainIframe"</span> <span class="attr">ref</span>=<span class="string">"mainIframe"</span> <span class="attr">name</span>=<span class="string">"mainIframe"</span> <span class="attr">:src</span>=<span class="string">"./demo.html"</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">scrolling</span>=<span class="string">"auto"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'...'</span>,</span></span><br><span class="line">  props: &#123;&#125;,</span><br><span class="line">  mounted () &#123;&#125;,</span><br><span class="line">  methods: &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">"less"</span> <span class="attr">scoped</span>&gt;</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="父传子（vue-–-gt-iframe）"><a href="#父传子（vue-–-gt-iframe）" class="headerlink" title="父传子（vue –&gt; iframe）"></a>父传子（vue –&gt; iframe）</h2><h3 id="1-postMessage"><a href="#1-postMessage" class="headerlink" title="1. postMessage"></a>1. postMessage</h3><p>首先在父组件mounted的时候，要先获取到iframe的内容窗口：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在mounted生命周期中获取iframe的内容窗口</span></span><br><span class="line"><span class="keyword">this</span>.iframeWin = <span class="keyword">this</span>.$refs.mainIframe.contentWindow</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在methods中定义方法，向iframe传值时调用</span></span><br><span class="line">public sendMessage (val) &#123;</span><br><span class="line">  <span class="comment">// 外部vue向iframe内部传数据</span></span><br><span class="line">  <span class="keyword">this</span>.iframeWin.postMessage(&#123;</span><br><span class="line">    cmd: <span class="string">'returnInfo'</span>,</span><br><span class="line">    params: &#123;&#125;</span><br><span class="line">  &#125;, <span class="string">'*'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>iframe包裹的html页面中需要创建一个listener来监听父组件传过来的信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mounted 生命周期中定义监听</span></span><br><span class="line">mounted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">"message"</span>, <span class="keyword">this</span>.handleMessageFromParent)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在methods中定义方法</span></span><br><span class="line">handleMessageFromParent (event) &#123;</span><br><span class="line">    <span class="keyword">var</span> data = event.data;</span><br><span class="line">    <span class="keyword">switch</span> (data.cmd) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'returnInfo'</span>:</span><br><span class="line">        <span class="keyword">this</span>.info = data.params.info</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-直接操作iframe"><a href="#2-直接操作iframe" class="headerlink" title="2. 直接操作iframe"></a>2. 直接操作iframe</h3><p>父级页面直接更改iframe里面的值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">setData(data) &#123;</span><br><span class="line">  <span class="comment">// 获得对应iframe的window对象</span></span><br><span class="line">  <span class="keyword">const</span> obj1 = <span class="built_in">window</span>.frames[<span class="string">'mainIframe'</span>]</span><br><span class="line">  obj1.wpsData = <span class="string">'设置的数据'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证 发现wpsData数据已经改变</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  alert(wpsData) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但是如果要在父组件中模拟子组件的点击或者是按键操作，还是要通过postMessage。例如，我在父组件中添加按钮，点击就可以触发iframe里html页面的切换或者其他操作。</p>
<h2 id="子传父（iframe-–-gt-vue）"><a href="#子传父（iframe-–-gt-vue）" class="headerlink" title="子传父（iframe –&gt; vue）"></a>子传父（iframe –&gt; vue）</h2><p>子组件传值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// methods中定义方法</span></span><br><span class="line"><span class="built_in">window</span>.parent.postMessage(&#123;</span><br><span class="line">  cmd: <span class="string">'returnInfo'</span>,</span><br><span class="line">  params: &#123;</span><br><span class="line">    info: <span class="string">'0101听到请回答'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="string">'*'</span>)</span><br></pre></td></tr></table></figure>
<p>父组件接收</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mounted 生命周期中定义监听</span></span><br><span class="line">mounted() &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">"message"</span>, <span class="keyword">this</span>.handleMessage)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同样在methods中定义一个方法</span></span><br><span class="line">handleMessage (event) &#123;</span><br><span class="line">  <span class="keyword">var</span> data = event.data;</span><br><span class="line">  <span class="keyword">switch</span> (data.cmd) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">'returnInfo'</span>:</span><br><span class="line">        <span class="keyword">this</span>.info = data.info</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考博客：<br><a href="https://www.cnblogs.com/clwydjgs/p/11898622.html" target="_blank" rel="noopener">vue项目iframe的传值问题</a><br><a href="https://juejin.im/post/6844904126879367176" target="_blank" rel="noopener">vue中iframe的传值</a><br><a href="https://blog.csdn.net/qq_34335450/article/details/99851356" target="_blank" rel="noopener">postMessage和addEventListener踩坑</a></p>
<h2 id="未完待续…补充完善postMessage的相关原理"><a href="#未完待续…补充完善postMessage的相关原理" class="headerlink" title="未完待续…补充完善postMessage的相关原理"></a>未完待续…补充完善postMessage的相关原理</h2> 
      <!-- reward -->
      <!--  -->
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>

     
   
</article>

    
    <article
  id="post-mapbox的一些应用"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/08/24/mapbox%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BA%94%E7%94%A8/"
    >mapbox的一些应用</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/08/24/mapbox%E7%9A%84%E4%B8%80%E4%BA%9B%E5%BA%94%E7%94%A8/" class="article-date">
  <time datetime="2020-08-24T02:13:13.000Z" itemprop="datePublished">2020-08-24</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">数据可视化</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="1-如何添加地图瓦片"><a href="#1-如何添加地图瓦片" class="headerlink" title="1. 如何添加地图瓦片"></a>1. 如何添加地图瓦片</h3><p><a href="https://www.mapbox.cn/mapbox-gl-js/example/map-tiles/" target="_blank" rel="noopener">官方demo</a>   </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">'utf-8'</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>添加栅格切片数据源<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">'viewport'</span> <span class="attr">content</span>=<span class="string">'initial-scale=1,maximum-scale=1,user-scalable=no'</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.js'</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">'https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.css'</span> <span class="attr">rel</span>=<span class="string">'stylesheet'</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">body</span> &#123; <span class="attribute">margin</span>:<span class="number">0</span>; <span class="attribute">padding</span>:<span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-id">#map</span> &#123; <span class="attribute">position</span>:absolute; <span class="attribute">top</span>:<span class="number">0</span>; <span class="attribute">bottom</span>:<span class="number">0</span>; <span class="attribute">width</span>:<span class="number">100%</span>; &#125;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">'map'</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">mapboxgl.accessToken = <span class="string">'&lt;your access token here&gt;'</span>;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> tileset = <span class="string">'mapbox.streets'</span>;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> map = <span class="keyword">new</span> mapboxgl.Map(&#123;</span></span><br><span class="line"><span class="actionscript">    container: <span class="string">'map'</span>, <span class="comment">// container id</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 在style的source的tiles里面添加要加载地图瓦片的url，可以是一个也可以是多个，一定要配&#123;z&#125;&#123;x&#125;&#123;y&#125;</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// type指定的是类型，地图瓦片是“raster”</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// tileSize设定的是每一个瓦片上面的像素值</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// layers里面定义的是瓦片样式</span></span></span><br><span class="line">    style: &#123;</span><br><span class="line"><span class="actionscript">        <span class="string">"version"</span>: <span class="number">8</span>,</span></span><br><span class="line"><span class="actionscript">        <span class="string">"sources"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="string">"raster-tiles"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="string">"type"</span>: <span class="string">"raster"</span>,</span></span><br><span class="line"><span class="actionscript">                <span class="string">'tiles'</span>: [</span></span><br><span class="line"><span class="actionscript">                    <span class="string">"http://localhost:63342/MapBox/test/&#123;z&#125;/&#123;x&#125;/&#123;y&#125;.png"</span></span></span><br><span class="line">                ]</span><br><span class="line"><span class="actionscript">                <span class="string">"tileSize"</span>: <span class="number">256</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="actionscript">        <span class="string">"layers"</span>: [</span></span><br><span class="line">          &#123;</span><br><span class="line"><span class="actionscript">            <span class="string">"id"</span>: <span class="string">"simple-tiles"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"type"</span>: <span class="string">"raster"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"source"</span>: <span class="string">"raster-tiles"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"minzoom"</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"maxzoom"</span>: <span class="number">22</span></span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line"><span class="actionscript">            <span class="string">"id"</span>: <span class="string">"background"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"type"</span>: <span class="string">"background"</span>,</span></span><br><span class="line"><span class="actionscript">            <span class="string">"paint"</span>: &#123;</span></span><br><span class="line"><span class="actionscript">              <span class="string">"background-color"</span>: <span class="string">"rgba(0, 0, 0, 1)"</span></span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript">    center: [<span class="number">-74.50</span>, <span class="number">40</span>], <span class="comment">// starting position</span></span></span><br><span class="line"><span class="actionscript">    zoom: <span class="number">2</span> <span class="comment">// starting zoom</span></span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在使用之前，需要先设置mapboxgl.accessToken。access tokens（访问令牌）可以使用API提供的示例（如下），也可以注册MapBox账号,在用户信息页查看或者创建令牌。另外我们需要引入mapbox的一个css库，不然样式方面可能出现问题。如果不是在html中通过link引入，而是在vue中引入，可以采取以下方式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=<span class="string">"less"</span> scoped&gt;</span><br><span class="line">@<span class="keyword">import</span> url=<span class="string">"https://api.tiles.mapbox.com/mapbox-gl-js/v1.1.1/mapbox-gl.css"</span></span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-墨卡托映射"><a href="#2-墨卡托映射" class="headerlink" title="2. 墨卡托映射"></a>2. 墨卡托映射</h3><p>&emsp;&emsp;地图是球形的，但是在地图上展示的是二维矩形的，所以需要一个映射关系，将球形坐标映射成二维坐标。常用的就是墨卡托映射。（还有很多其他的映射方法，各有利弊。）<br><img src="https://res.cloudinary.com/liran123456/image/upload/v1598251891/blog/mapbox/%E5%A2%A8%E5%8D%A1%E6%89%98%E6%8A%95%E5%BD%B1_qq94ke.png" alt="image"><br>&emsp;&emsp;如图所示，墨卡托投影的原理是等角圆柱投影。假设地球被围在一中空的圆柱里，其基准纬线与圆柱相切（赤道）接触，然后再假想地球中心有一盏灯，把球面上的图形投影到圆柱体上，再把圆柱体展开，这就是一幅选定基准纬线上的“墨卡托投影”绘制出的地图。墨卡托投影坐标和经纬度坐标的转换公式为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// lngX(lng: number)</span></span><br><span class="line"><span class="comment">// latY(lat: number)</span></span><br><span class="line"><span class="keyword">const</span> lngX = <span class="function">(<span class="params">lng</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> (<span class="number">180</span> + lng) / <span class="number">360</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> latY = <span class="function">(<span class="params">lat</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> y = <span class="number">180</span> / <span class="built_in">Math</span>.PI * <span class="built_in">Math</span>.log(<span class="built_in">Math</span>.tan(<span class="built_in">Math</span>.PI / <span class="number">4</span> + lat * <span class="built_in">Math</span>.PI / <span class="number">360</span>));</span><br><span class="line">  <span class="keyword">return</span> -(<span class="number">180</span>-y) / <span class="number">360</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上是经纬度转墨卡托的公式，基于此也可以推出墨卡托转经纬度的公式。</p>
<h3 id="3-mapbox中MercatorCoordinate接口"><a href="#3-mapbox中MercatorCoordinate接口" class="headerlink" title="3. mapbox中MercatorCoordinate接口"></a>3. mapbox中MercatorCoordinate接口</h3><p>一个 MercatorCoordinate 实例表示一个三维投影坐标。<br>MercatorCoordinate 使用Web墨卡托投影(EPSG:3857) 但在单位处理上略微不同:   </p>
<ul>
<li>单位1表示投影后世界的宽度而不是原来定义的墨卡托坐标中的米</li>
<li>坐标空间的原点为西北角而不是原来的中心点</li>
<li>例如, MercatorCoordinate(0, 0, 0) 表示墨卡托空间的西北角， MercatorCoordinate(1, 1, 0) 表示东南角。如果你熟悉 vector tiles 可以认为该坐标空间等同于extent为1的 0/0/0 矢量瓦片的坐标空间。z 轴在 MercatorCoordinate 中与其它轴是等比例共形相似的。墨卡托坐标中的立方体渲染出来仍是立方体。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> MercatorCoordinate(x: number, <span class="attr">y</span>: number, <span class="attr">z</span>: number)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用</span></span><br><span class="line"><span class="keyword">var</span> nullIsland = <span class="keyword">new</span> mapboxgl.MercatorCoordinate(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0</span>);</span><br></pre></td></tr></table></figure></li>
<li>x(number)x轴上的位置；</li>
<li>y(number)y轴上的位置；</li>
<li>z(number)(default 0)z轴上的位置。</li>
</ul>
<p>Static Members</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将 LngLat 投影转换为 MercatorCoordinate</span></span><br><span class="line">fromLngLat(lngLatLike, altitude)</span><br><span class="line"></span><br><span class="line"><span class="comment">// parameters</span></span><br><span class="line">lngLatLike(LngLatLike)待转换位置的经纬度。</span><br><span class="line">altitude(number)(<span class="keyword">default</span> <span class="number">0</span>)该位置点的海拔高度，单位为米。</span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line">MercatorCoordinate: 已投影的墨卡托坐标。</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="keyword">var</span> coord = mapboxgl.MercatorCoordinate.fromLngLat(&#123; <span class="attr">lng</span>: <span class="number">0</span>, <span class="attr">lat</span>: <span class="number">0</span>&#125;, <span class="number">0</span>);</span><br><span class="line">coord; <span class="comment">// MercatorCoordinate(0.5, 0.5, 0)</span></span><br></pre></td></tr></table></figure>
<p>Instance Members</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回该坐标的经纬度 LngLat</span></span><br><span class="line">toLngLat()</span><br><span class="line"></span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line">LngLat: LngLat 实例</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="keyword">var</span> coord = <span class="keyword">new</span> mapboxgl.MercatorCoordinate(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">var</span> latLng = coord.toLngLat(); <span class="comment">// LngLat(0, 0)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回该坐标的海拔高度，单位为米</span></span><br><span class="line">toAltitude()</span><br><span class="line"></span><br><span class="line"><span class="comment">// returns</span></span><br><span class="line">number: 海拔高度值，单位为米</span><br><span class="line"><span class="comment">// example</span></span><br><span class="line"><span class="keyword">var</span> coord = <span class="keyword">new</span> mapboxgl.MercatorCoordinate(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.02</span>);</span><br><span class="line">coord.toAltitude(); <span class="comment">// 6914.281956295339</span></span><br></pre></td></tr></table></figure>

<h3 id="4-如何将经纬度坐标转换成utm坐标"><a href="#4-如何将经纬度坐标转换成utm坐标" class="headerlink" title="4. 如何将经纬度坐标转换成utm坐标"></a>4. 如何将经纬度坐标转换成utm坐标</h3><p>&emsp;&emsp;一开始在网上搜索方法的时候，发现绝大部分博客写得都很麻烦，需要引入库proj4js库，然后再去计算，使用起来很麻烦。后来发现utm本身就有一个库来计算。<br>Installation</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install utm-latlng</span><br></pre></td></tr></table></figure>
<p>Usage</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> utmObj = <span class="built_in">require</span>(<span class="string">'utm-latlng'</span>);</span><br><span class="line"><span class="keyword">var</span> utm=<span class="keyword">new</span> utmObj(); <span class="comment">//Default Ellipsoid is 'WGS 84'</span></span><br><span class="line">OR</span><br><span class="line"><span class="keyword">var</span> utm=<span class="keyword">new</span> utmObj(<span class="string">'Everest'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将utm转换成经纬度</span></span><br><span class="line"><span class="comment">// Returns &#123; lat:xxxxx, lng:xxxxx &#125;.</span></span><br><span class="line">utm.convertUtmToLatLng(easting, northing, zoneNum, zoneLetter);</span><br><span class="line"><span class="comment">// 将经纬度转换成utm</span></span><br><span class="line"><span class="comment">// Returns &#123; Easting:xxxxx, Northing:xxxxx, ZoneNumber:xxxx, ZoneLetter:xxxxx &#125;.</span></span><br><span class="line"><span class="comment">// precision代表精度</span></span><br><span class="line">utm.convertLatLngToUtm(latitude, longitude,precision);</span><br></pre></td></tr></table></figure>

<h3 id="5-地图瓦片上“m”米和“px”像素的转换"><a href="#5-地图瓦片上“m”米和“px”像素的转换" class="headerlink" title="5. 地图瓦片上“m”米和“px”像素的转换"></a>5. 地图瓦片上“m”米和“px”像素的转换</h3><p>&emsp;&emsp;会存在这样的情况，数据的单位是m，但是绘制在瓦片是以px作为单位的，这个时候就需要两者进行转换来定位。<br>&emsp;&emsp;$\frac{(2^x)<em>256}{p_x}=\frac{2\Pi</em>R*cos(lat)}{Length}$   </p>
<ul>
<li>$2^x$: x其实代表的是zoom，就是地图的缩放等级。2的zoom次方代表的是当前瓦片的数量。zoom=1: 1张瓦片；zoom=2: 两张瓦片…成幂指数关系。</li>
<li>256: 代表的是tileSize的值，就是每张瓦片上的像素数，也可以取512，具体要看地图的配置。</li>
<li>$2\Pi R$: R指的是地球的半径，所以$2\Pi R$代表地球赤道的周长。</li>
<li>$2\Pi Rcos(lat)$: 任意纬度圈的周长，lat代表纬度(要转换成弧度)。</li>
<li>$p_x$: 就是我们所要求的像素值。</li>
<li>Length: 就是传过来的以m为单位的数据。</li>
</ul>
<h3 id="6-缩放时不同zoom下px的转换"><a href="#6-缩放时不同zoom下px的转换" class="headerlink" title="6.缩放时不同zoom下px的转换"></a>6.缩放时不同zoom下px的转换</h3><p>&emsp;&emsp;$\frac{(2^x)<em>256}{p_1}$=$\frac{(2^y)</em>256}{p_2}$   </p>
<ul>
<li>x,y代表两个不同的zoom等级</li>
<li>p1,p2代表两个等级下对应的像素</li>
</ul>
 
      <!-- reward -->
      <!--  -->
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>

     
   
</article>

    
    <article
  id="post-canvas"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/08/23/canvas/"
    >canvas</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/08/23/canvas/" class="article-date">
  <time datetime="2020-08-23T08:36:19.000Z" itemprop="datePublished">2020-08-23</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/">数据可视化</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>最近在开发的过程中，涉及了canvas的一些使用，在这里记录一下。<br>首先使用mapbox加载地图瓦片，因为要在瓦片上添加一些元素，所以采用了添加了一个与地图一样大小的canvas，然后将需要绘制的元素绘制在添加的canvas上。</p>
<h3 id="1-如何将canvas添加在mapbox下面"><a href="#1-如何将canvas添加在mapbox下面" class="headerlink" title="1. 如何将canvas添加在mapbox下面"></a>1. 如何将canvas添加在mapbox下面</h3><p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598251906/blog/canvas/%E5%9C%B0%E5%9B%BE%E7%93%A6%E7%89%87_l7mewh.png" alt="image"><br>&emsp;&emsp;可以看到地图瓦片渲染之后，会自动生成一个canvas，而且不管是生成的canvas还是外层的div的className都是固定的，因此我们可以通过getElementByClassName定位，然后使用appendChild将要添加的canvas添加到后面。因为是appendChild方法，所以我们要定位到外层的div。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>);</span><br><span class="line"><span class="comment">// [0]定位到的是瓦片生成的canvas，我们要将添加的canvas添加到这个后面，所以是在这个后面appendChild</span></span><br><span class="line"><span class="built_in">document</span>.getElementByClassName(<span class="string">'mapboxgl-canvas-container'</span>)[<span class="number">0</span>].appendChild(canvas);</span><br></pre></td></tr></table></figure>

<h3 id="2-如何旋转图片"><a href="#2-如何旋转图片" class="headerlink" title="2. 如何旋转图片"></a>2. 如何旋转图片</h3><p>&emsp;&emsp;在向canvas上添加图片的过程中，需要将图片旋转不同的角度，但返现Image()这个api并没有rotate的功能，所以只能在canvas上进行旋转。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>菜鸟教程(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"myCanvas"</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"100"</span> <span class="attr">style</span>=<span class="string">"border:1px solid #c3c3c3;"</span>&gt;</span></span><br><span class="line">您的浏览器不支持 HTML5 canvas 标签。</span><br><span class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> canvas=<span class="built_in">document</span>.getElementById(<span class="string">"myCanvas"</span>);</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> width = canvas.width;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> height = canvas.height;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> imgWidth = <span class="number">20</span>;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> imgHeight = <span class="number">20</span>;</span></span><br><span class="line"><span class="actionscript">ctx.fillStyle=<span class="string">"#FF0000"</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript"><span class="comment">// 将旋转中心平移到画布中心</span></span></span><br><span class="line">ctx.translate(width / 2, height / 2);</span><br><span class="line"><span class="actionscript"><span class="comment">// 旋转画布(将角度转换成弧度)</span></span></span><br><span class="line"><span class="javascript">ctx.rotate(<span class="number">30</span> * <span class="built_in">Math</span>.PI / <span class="number">180</span>);</span></span><br><span class="line"><span class="actionscript"><span class="comment">// 将画布向上向左平移图片的一半，这样使绘制点位于图片中心</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 如果希望绘制点位于图片左上角</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// ctx.translate(0, 0);</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 如果希望绘制点位于图片右上角</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// ctx.translate(-imgWidth, 0);</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 如果希望绘制点位于图片左下角</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// ctx.translate(0, -imgHeight);</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 如果希望绘制点位于图片右下角</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// ctx.translate(-imgWidth, -imgHeight);</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 以此类推 可以指定任意位置作为绘制起点</span></span></span><br><span class="line">ctx.translate(-imgWidth / 2, -imgHeight / 2);</span><br><span class="line"><span class="actionscript"><span class="comment">// 在画布的（x, y）处绘制图片, (x, y)是中心点</span></span></span><br><span class="line">ctx.fillRect(x,y,imgWidth,imgHeight);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598251906/blog/canvas/imageRotate_admhis.png" alt="image"><br>如果所示，在画布中心画了一个旋转了30度的矩形。但如果次是在接着画一个正常的矩形，效果和这个旋转的矩形是一样的，因为画布已经旋转了。</p>
<h3 id="3-如何旋转图片同时保持画布不旋转"><a href="#3-如何旋转图片同时保持画布不旋转" class="headerlink" title="3. 如何旋转图片同时保持画布不旋转"></a>3. 如何旋转图片同时保持画布不旋转</h3><p>&emsp;&emsp;在后期优化性能的时候发现，因为涉及到每个图片的旋转角度不同，如果每次旋转canvas都跟着一起旋转的话，那就要给每个图片都新建一个canvas，这样就会频繁的操作dom（dom的操作当然要尽可能少）。所以如果可以实现图片旋转而画布不旋转，这样就可以只新建一个canvas。实现的核心是ctx.save()和ctx.restore().</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> canvas=<span class="built_in">document</span>.getElementById(<span class="string">"myCanvas"</span>);</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> width = canvas.width;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> height = canvas.height;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> imgWidth = <span class="number">20</span>;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> imgHeight = <span class="number">20</span>;</span></span><br><span class="line"><span class="actionscript">ctx.fillStyle=<span class="string">"#FF0000"</span>;</span></span><br><span class="line">ctx.save();</span><br><span class="line">ctx.translate(100, 50);</span><br><span class="line"><span class="javascript">ctx.rotate(<span class="number">30</span> * <span class="built_in">Math</span>.PI / <span class="number">180</span>);</span></span><br><span class="line">ctx.translate(-10, -10);</span><br><span class="line">ctx.fillRect(0,0,20,20);</span><br><span class="line">ctx.restore();</span><br><span class="line">	</span><br><span class="line">ctx.save();</span><br><span class="line">ctx.translate(100, 50);</span><br><span class="line"><span class="javascript">ctx.rotate(<span class="number">60</span> * <span class="built_in">Math</span>.PI / <span class="number">180</span>);</span></span><br><span class="line">ctx.translate(-10, -10);</span><br><span class="line">ctx.fillRect(0,0,20,20);</span><br><span class="line">ctx.restore();</span><br><span class="line"></span><br><span class="line">ctx.fillRect(0,0,20,20);</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598251906/blog/canvas/canvasRotate_name_rft83r.png" alt="image"><br>&emsp;&emsp;从代码中可以看出，我们先画了一个旋转30度的矩形，然后画了一个旋转60度的矩形，在左上角画了一个正常的矩形，都是正常显示的。并没有因为前一个矩形的旋转对之后的绘制产生影响。所以可以看出ctx.save()和ctx.restore()可以保持画布的状态不变。</p>
<h3 id="4-如何在同一个画布上设置不同的样式"><a href="#4-如何在同一个画布上设置不同的样式" class="headerlink" title="4. 如何在同一个画布上设置不同的样式"></a>4. 如何在同一个画布上设置不同的样式</h3><p>&emsp;&emsp;有时会有这样的需求：例如这个矩形用红色，另一个矩形用蓝色。当然不止颜色，还包括其他样式。那如何在同一个画布上实现呢，而不是新建canvas？<br>使用ctx.beginPath()和ctx.closePath()</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> c=<span class="built_in">document</span>.getElementById(<span class="string">"myCanvas"</span>);</span></span><br><span class="line"><span class="actionscript"><span class="keyword">var</span> ctx=c.getContext(<span class="string">"2d"</span>);</span></span><br><span class="line">ctx.beginPath();</span><br><span class="line"><span class="actionscript">ctx.fillStyle=<span class="string">"#FF0000"</span>;</span></span><br><span class="line">ctx.save();</span><br><span class="line">ctx.translate(100, 50);</span><br><span class="line"><span class="javascript">ctx.rotate(<span class="number">30</span> * <span class="built_in">Math</span>.PI / <span class="number">180</span>);</span></span><br><span class="line">ctx.translate(-10, -10);</span><br><span class="line">ctx.fillRect(0,0,20,20);</span><br><span class="line">ctx.restore();</span><br><span class="line">ctx.closePath();</span><br><span class="line"></span><br><span class="line">ctx.beginPath();</span><br><span class="line"><span class="actionscript">ctx.fillStyle=<span class="string">"blue"</span>;</span></span><br><span class="line">ctx.fillRect(0,0,20,20);</span><br><span class="line">ctx.closePath();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598251890/blog/canvas/canvasDifferent_p38ckt.png" alt="image"></p>
<h3 id="5-实时更新canvas时如何解决闪屏现象"><a href="#5-实时更新canvas时如何解决闪屏现象" class="headerlink" title="5. 实时更新canvas时如何解决闪屏现象"></a>5. 实时更新canvas时如何解决闪屏现象</h3><p>使用双缓存解决，参考博客：<a href="https://juejin.im/post/6844903832439242766" target="_blank" rel="noopener">使用双缓存解决 Canvas clearRect 引起的闪屏问题</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">updateCanvas()&#123;</span><br><span class="line">  <span class="keyword">const</span> canvas = <span class="built_in">document</span>.getElementById(<span class="string">'canvas'</span>); <span class="comment">// 获取页面中的 canvas</span></span><br><span class="line">  <span class="keyword">const</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">  <span class="keyword">const</span> tempCanvas = <span class="built_in">document</span>.createElement(<span class="string">'canvas'</span>); <span class="comment">// 新建一个 canvas 作为缓存 canvas</span></span><br><span class="line">  <span class="keyword">const</span> tempCtx = tempCanvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">  tempCanvas.width = <span class="number">1448</span>; tempCanvas.height = <span class="number">750</span>; <span class="comment">// 设置宽高</span></span><br><span class="line">  <span class="comment">// 开始绘制</span></span><br><span class="line">  tempCtx.drawImage(bg,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">// 背景</span></span><br><span class="line">  ... <span class="comment">// 省略其他绘制过程</span></span><br><span class="line">  <span class="comment">// 缓存 canvas 绘制完成</span></span><br><span class="line">  ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1448</span>,<span class="number">750</span>); <span class="comment">// 清空旧 canvas</span></span><br><span class="line">  ctx.drawImage(tempCanvas,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">// 将缓存 canvas 复制到旧的 canvas</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-如何根据多点绘制平滑的曲线"><a href="#6-如何根据多点绘制平滑的曲线" class="headerlink" title="6. 如何根据多点绘制平滑的曲线"></a>6. 如何根据多点绘制平滑的曲线</h3><p>&emsp;&emsp;实现的原理是二次贝塞尔曲线，所以首先介绍一下二次贝塞尔曲线。<br>二次贝塞尔曲线由三个点P0，P1，P2来确定，这些点也被成为控制点。曲线的方程为：<br><img src="https://res.cloudinary.com/liran123456/image/upload/v1598251895/blog/canvas/%E8%B4%9D%E5%A1%9E%E5%B0%94%E5%85%AC%E5%BC%8F_maxtpk.png" alt="image"><br>这个方程其实有它的几何意义，它表示可以通过这样的步骤来绘制一条曲线：   </p>
<ul>
<li>选定一个0-1的t值</li>
<li>通过P0和P1计算出点Q0，Q0在P0 P1连成的直线上，并且length( P0, Q0 ) = length( P0, P1 ) * t</li>
<li>同样，通过P1和P2计算出Q1，使得length( P1, Q1 ) = length( P1, P2 ) * t</li>
<li>再重复一次这个步骤，通过Q1和Q2计算出B，使得length( Q0, Q1 ) = length( Q0, B ) * t。B就为当前曲线上的点<br>注：上面的length表示两点之间的长度<br><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252397/blog/canvas/%E8%B4%9D%E5%A1%9E%E5%B0%94%E6%9B%B2%E7%BA%BF%E7%BB%93%E6%9E%84_yftrln.png" alt="image"><br>在canvas中，绘制贝塞尔曲线的api为<br>其中p1x, p1y, p2x, p2y为后两个控制点（P1和P2）的横纵坐标，它默认将当前路径的起点作为一个控制点（P0）。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获得贝塞尔曲线的控制点</span></span><br><span class="line"><span class="comment">// ps是传进来的一系列的点的数组</span></span><br><span class="line">public getCtrlPoint (ps, i, a, b) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!a || !b) &#123;</span><br><span class="line">    a = <span class="number">0.25</span></span><br><span class="line">    b = <span class="number">0.25</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// debugger</span></span><br><span class="line">  <span class="keyword">const</span> pAx = ps[i].x + (ps[i+<span class="number">1</span>].x - ps[i<span class="number">-1</span>].x) * a</span><br><span class="line">  <span class="keyword">const</span> pAy = ps[i].y + (ps[i+<span class="number">1</span>].y - ps[pre].y) * a</span><br><span class="line">  <span class="keyword">const</span> pBx = ps[i+<span class="number">1</span>].x - (ps[i+<span class="number">2</span>].x - ps[i].x) * b</span><br><span class="line">  <span class="keyword">const</span> pBy = ps[i+<span class="number">1</span>].y - (ps[i+<span class="number">2</span>].y - ps[i].y) * b</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    pA: &#123; <span class="attr">x</span>: pAx, <span class="attr">y</span>: pAy &#125;,</span><br><span class="line">    pB: &#123; <span class="attr">x</span>: pBx, <span class="attr">y</span>: pBy &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用方法</span></span><br><span class="line"><span class="keyword">const</span> ctrlP = that.getCtrlPoint(points, i, start, end, <span class="number">0.25</span>, <span class="number">0.25</span>)</span><br><span class="line">ctx.bezierCurveTo(ctrlP.pA.x, ctrlP.pA.y, ctrlP.pB.x, ctrlP.pB.y, ps[i].x, ps[i].y)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>但是这个方法存在一个问题，就是会出现越界的问题：<br>i=0的时候，ps[i-1]越界；<br>i=arr.length-2的时候，ps[i+2]越界；<br>i=arr.length-1的时候，ps[i+1]和ps[i+2]越界；<br>所以，对程序进行了优化，对边界越界的情况做了判断：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public getCtrlPoint (ps, i, a, b) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!a || !b) &#123;</span><br><span class="line">    a = <span class="number">0.25</span></span><br><span class="line">    b = <span class="number">0.25</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> length = ps.length - <span class="number">1</span></span><br><span class="line">  <span class="keyword">const</span> pre = (i - <span class="number">1</span>) &lt; <span class="number">0</span> ? <span class="number">0</span> : (i - <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> next = (i + <span class="number">1</span>) &gt; length ? length : (i + <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> next2 = (i + <span class="number">2</span>) &gt; length ? length : (i + <span class="number">2</span>)</span><br><span class="line">  <span class="comment">// debugger</span></span><br><span class="line">  <span class="keyword">const</span> pAx = ps[i].x + (ps[next].x - ps[pre].x) * a</span><br><span class="line">  <span class="keyword">const</span> pAy = ps[i].y + (ps[next].y - ps[pre].y) * a</span><br><span class="line">  <span class="keyword">const</span> pBx = ps[next].x - (ps[next2].x - ps[i].x) * b</span><br><span class="line">  <span class="keyword">const</span> pBy = ps[next].y - (ps[next2].y - ps[i].y) * b</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    pA: &#123; <span class="attr">x</span>: pAx, <span class="attr">y</span>: pAy &#125;,</span><br><span class="line">    pB: &#123; <span class="attr">x</span>: pBx, <span class="attr">y</span>: pBy &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就对边界做了容错处理，数组两边的点也可以画进曲线。</p>
 
      <!-- reward -->
      <!--  -->
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>

     
   
</article>

    
    <article
  id="post-观韵"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/08/16/%E8%A7%82%E9%9F%B5/"
    >观韵</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/08/16/%E8%A7%82%E9%9F%B5/" class="article-date">
  <time datetime="2020-08-16T14:59:42.000Z" itemprop="datePublished">2020-08-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>&emsp;&emsp;就目前来说，我是一个自制力有些差的人，这也是我一直想改进的地方。就拿这个博客来说，当时创建的时候，就和旁边同事夸下海口，说我争取每周写一篇（看样我当时已经给自己留了退路，说的是“争取”而不是“一定”），还想着随时把自己的感悟或者照片也在博客上做个记录，然鹅到现在…也只写了两篇博客，还都是转载别人比较好的博客，我揉合在一起打一遍加深印象。今天就开启博客新篇章————随笔。这第一篇随笔就献给我的同时兼公司同桌，观韵。<br>&emsp;&emsp;先聊聊这个笔名。我也是无意中发现的，第一反应不像是个男生的笔名，第二反应可能取自古诗？第三，，没有反应了。每个人取笔名肯定有他自己的想法，那么好奇的我也问原因了，但他让我猜，我又懒又笨，肯定选择不猜。反正对于我来说只是一个代号，因为我不是本人，这个笔名所具有的特殊含义肯定对我没有意义不是。说到这里，我一直觉得起名字是件很费脑子的事情，除了姓不需要想之外，感觉每个字都要赋予很多层意义。但我家不是这样，我姑姑很随性的取了，下雪天出生加上流行叠字，所以就叫雪雪。而且我一直觉得三个字的名字比两个字好听，虽然我现在的名字是两个字。<br>&emsp;&emsp;好的，扯远了，说回我的同事。我从实习到离职到正式入职后一段时间，都和他是同桌。为什么说一段时间呢，嗯对，他现在因为一些原因已经换地方了，这之后再说。观韵是一个比我还小的男生！因为我小学五年制的原因，可以说这一路上学走过来，碰到比我小的人寥寥无几，所以当时知道他比我小的时候那个震惊呀。不过可能是因为观韵看起来比较成熟稳重，所以我一开始就下意识的认为他比我大，果然任何时候先入为主都是非常不对的。<br>&emsp;&emsp;刚实习的时候，我不懂的地方很多，大部分时候都不敢问导师，因为担心被自己的问题蠢到，这个时候观韵就给了我很大的帮助。也许是因为年龄相差不大，也许是因为坐的比较近？观韵给我一种感觉，就是不论我问什么愚蠢的问题，他都会和我说。但事实是我想多了，还是要问一些经过大脑的问题哈哈。从观韵身上我学到了很多，例如如何一步步debug排查问题，如何将代码写的更优雅，尽量每天刷一道算法题（这个当然没有坚持下来）。当然我也从他那里白吃白喝了很多，咖啡零食，有来有往嘛，我偶尔也是有回馈的。观韵每次看到好的文章都会分享给我，于是我的书签栏的收藏越来越多。很欣赏观韵对于我们这个领域前沿技术的关注和了解，有时也很好奇他从哪里知道那么多，后来想想可能是我太懒了。<br>&emsp;&emsp;实习的时候基本都在认真的汲取知识，偶尔闲聊的时候发现我们也有许多男女生都有的观点差异。例如我喜欢看的剧和他喜欢看的剧，我喜欢听的音乐和他喜欢听的音乐，简直是天差地别。。所以很少就这些问题分享讨论，特别是对于一个常年在墙外的人，我们所关注的问题都不一样。<br>&emsp;&emsp;就这样，在我很好很好的导师森哥和很好很好的同事观韵、晗晗的帮助和陪伴下，我的实习生活很快就结束了。因为我被导师抓！住！了！（对，我们实验室不允许实习，我是偷偷出来的）。至于导师是如何抓住我的，这就很戏剧划了。导师说每天在公交车站看见我匆匆忙忙的坐车。。woc我是没有想到，我导这么一人生赢家（副教授，娶了白富美，生了龙凤胎），竟然也这么绿色出行，真是人算不如天算。于是我就乖乖的回学校呆实验室了。离职的时候，观韵还从五楼送我到一楼。后来我们有见过一面，因为我拿奖学金了，他也一直想去看看我们学校，所以我就请他在学校里吃了饭，然后去西湖逛了逛，很开心也很放松。可能是观韵觉着蹭饭吃不太好意思，于是我就收到了福尔摩斯探案全集，到今天为止只看到了第二本。加油努力！看完它。<br>&emsp;&emsp;回到实验室不久，就加入了紧张又忙碌的秋招大军，中间省略一万字，最后我拿到并选择了实习公司的offer，意味着我又即将回到熟悉的团队，和熟悉的人儿一起工作。相比于未知的一切，还是这种已知令人感到安心。2020开始之后，一切都充满了魔幻主义色彩，我尽可能早的入职公司，不知怎么，总感觉晚一天入职，心里就不踏实。当然也是想尽快投入到知识的海洋、社畜的生活（说人话就是想挣钱）。<br>&emsp;&emsp;以正式员工身份重新回来的感觉还是不一样的。不管是导师对你的期望，还是自己对自己的要求，抑或是同事对你的帮助方面。这个阶段，在团队协作的同时也要意识到自己的独立性，更多的去培养自己发现问题和解决问题的能力，而不是一有问题就依赖别人。我又坐到了自己的工位上，旁边的依旧是观韵，后面是导师。我很喜欢这种一切如旧的感觉，让人感觉安心又亲切。一切都在正常的运转中，导师会和我沟通自己负责的工作，大leader也询问了我的适应情况。工作方面有问题的话，我一般先问观韵，再问导师，逐渐的完成了从学生到工作的转变。<br>&emsp;&emsp;可是“暴风雨”的来到也是一瞬间的事情。导师和观韵也就是和往常一样讨论，也不知怎么就有些争吵起来了，声音越来越大，情绪也越来越激动。作为一个旁观者来说，我觉着是两人的理解产生了分歧。导师是觉得观韵的代码有改进的空间，换一种思路可能会更好，可以试一试；观韵就觉得导师否定了他的代码和成果，这是对自己的不认同。于是两个人越争论越激烈。发展到后面就是观韵提出了离职，结果是调到其他部门了。事后我也反思了自己。我觉得如果我当时及时打断他们的争论，为双方解释一下对方的意思，会不会就不是现在这样，大家还是一个team。因此我也十分自责。真的就想当做了一场梦，可是事情发生了，没有及时阻止的我也是有错的人，希望观韵和导师可以像以前一样，一起讨论、争辩、开玩笑…唉<br>&emsp;&emsp;既然观韵调到了其他的团队，自然也就不在我旁边坐了。其实我对这种变化也是有些难过的（没有咖啡喝了只是一小方面哈哈），更多的是我觉得观韵坐我旁边，我很自在也很放松，换一个人可能很难这样。后面来了新同事，再过不久我们就搬了新工位，座位整体都打乱了。反而短时间内这种频繁的换动，让我适应了。其实就是这样，什么都是一直在变的，就算是桌子，今天的桌子和昨天的桌子也是不一样的。从那之后就很少见面了，即使离得也不远，我们的聚餐他也不参加了。这种感觉就像是我当初和我闺蜜上了同一所高中，教室就在楼上楼下，然而我们一学期也没见过几次面。当然这也是正常的，大家都在忙自己的工作学习，固定的线路和作息。<br>&emsp;&emsp;好啦，啰啰嗦嗦写了那么多，不管在哪里做什么，我希望大家一切都好！很感恩遇到了这么多的好同事好导师！</p>
 
      <!-- reward -->
      <!--  -->
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li></ul>

    </footer>
  </div>

     
   
</article>

    
    <article
  id="post-flex布局"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/08/04/flex%E5%B8%83%E5%B1%80/"
    >flex布局</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/08/04/flex%E5%B8%83%E5%B1%80/" class="article-date">
  <time datetime="2020-08-04T12:22:06.000Z" itemprop="datePublished">2020-08-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>flex布局是目前比较常用的布局，虽然每次常用的就有flex-direction和flex-wrap这两个属性，但还是想将其所有的属性总结描述一下。在一开始使用flex布局的时候翻查了很多博客，最后发现还是阮一峰老师的最经典，因此本文主要是搬抄阮老师的博客，自己手写一遍加深印象。<br>阮老师博客传送门：<a href="https://z.didi.cn/s7VfUlnZOoOLc" target="_blank" rel="noopener">flex布局教程：语法篇</a>  </p>
<h2 id="一、基本概念"><a href="#一、基本概念" class="headerlink" title="一、基本概念"></a>一、基本概念</h2><p>采用flex布局的元素，成为flex容器，它的所有子元素自动成为容器成员，成为flex项目。<br><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252036/blog/flex%E5%B8%83%E5%B1%80/flex-1_bmojdz.png" alt="image"><br>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。项目默认沿主轴排列。单个项目占据的主轴空间叫做<font color="pink">main size</font>，占据的交叉轴空间叫做<font color="pink">cross size</font></p>
<p><font color="orange">注意：设置flex布局后，子元素的float、clear和vertical-align属性将失效。</font>  </p>
<h2 id="二、容器的属性"><a href="#二、容器的属性" class="headerlink" title="二、容器的属性"></a>二、容器的属性</h2><p>以下6个属性设置在容器上。</p>
<table width="400px"><tr><td bgcolor=lightgray><font color="black">1. flex-direction</font></br>
<font color="black">2. flex-wrap</font></br>
<font color="black">3. flex-flow</font></br>
<font color="black">4. justify-content</font></br>
<font color="black">5. align-items</font></br>
<font color="black">6. align-content</font>
</td></tr></table>

<h3 id="2-1-flex-direction属性"><a href="#2-1-flex-direction属性" class="headerlink" title="2.1 flex-direction属性"></a>2.1 flex-direction属性</h3><p>决定主轴的方向（及项目的排列方向）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  flex-direction: row | row-reverse | column | column-reverse</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252035/blog/flex%E5%B8%83%E5%B1%80/flex-2_kloub7.png" alt="image"></p>
<ul>
<li>row(默认值)：主轴为水平方向，起点在左端。</li>
<li>row-reverse: 主轴为水平方向，起点在右端。</li>
<li>column: 主轴为垂直方向，起点在上沿。</li>
<li>column-reverse: 主轴为垂直方向，起点在下沿。</li>
</ul>
<h3 id="2-2-flex-wrap属性"><a href="#2-2-flex-wrap属性" class="headerlink" title="2.2 flex-wrap属性"></a>2.2 flex-wrap属性</h3><p>决定换行方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  flex-wrap: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>nowrap(默认): 不换行。<br><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252066/blog/flex%E5%B8%83%E5%B1%80/flex-3.1_crntuq.png" alt="image"></li>
<li>wrap: 换行，第一行在上方。<br><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252036/blog/flex%E5%B8%83%E5%B1%80/flex-3.2_tdouqy.png" alt="image"></li>
<li>wrap-reverse: 换行，第一行在下方。<br><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252068/blog/flex%E5%B8%83%E5%B1%80/flex-3.3_yt5d13.png" alt="image"></li>
</ul>
<h3 id="2-3-flex-flow属性"><a href="#2-3-flex-flow属性" class="headerlink" title="2.3 flex-flow属性"></a>2.3 flex-flow属性</h3><p>是flex-direction和flex-wrap的简写形式，默认值为<font color="orange">row nowrap</font></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  flex-flow: &lt;flex-direction&gt; || &lt;flex-wrap&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-4-justify-content属性"><a href="#2-4-justify-content属性" class="headerlink" title="2.4 justify-content属性"></a>2.4 justify-content属性</h3><p>定义了项目在主轴上的对齐方式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  justify-content: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252068/blog/flex%E5%B8%83%E5%B1%80/flex-4_bmbbse.png" alt="image"></p>
<ul>
<li>flex-start(默认值): 左对齐。</li>
<li>flex-end: 右对齐。</li>
<li>center: 居中。</li>
<li>space-between: 两端对齐，项目之间的间隔都相等。</li>
<li>space-around: 每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍。</li>
</ul>
<h3 id="2-5-align-items属性"><a href="#2-5-align-items属性" class="headerlink" title="2.5 align-items属性"></a>2.5 align-items属性</h3><p>定义项目在交叉轴上如何对齐。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  align-items: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252068/blog/flex%E5%B8%83%E5%B1%80/flex-5_cfpbbg.png" alt="image"></p>
<ul>
<li>flex-start(默认值): 交叉轴的 起点对齐。</li>
<li>flex-end: 交叉轴的终点对齐。</li>
<li>center: 交叉轴的中点对齐。</li>
<li>baseline: 项目的第一行文字的基线对齐。</li>
<li>stretch(默认值): 如果项目未设置高度或设为auto，将占满整个容器的高度。</li>
</ul>
<h3 id="2-6-align-content属性"><a href="#2-6-align-content属性" class="headerlink" title="2.6 align-content属性"></a>2.6 align-content属性</h3><p>定义了多根轴线的对齐方式，如果项目只有一根轴线，该属性不起作用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  align-content: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252071/blog/flex%E5%B8%83%E5%B1%80/flex-6_g2sind.png" alt="image"></p>
<ul>
<li>flex-start: 与交叉轴的起点对齐。</li>
<li>flex-end: 与交叉轴的终点对齐。</li>
<li>center: 与交叉轴的终点对齐。</li>
<li>space-between: 与交叉轴两端对齐，轴线之间的间隔平均分布。</li>
<li>space-around: 每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。</li>
<li>stretch(默认值): 轴线占满整个交叉轴。</li>
</ul>
<h2 id="三、项目的属性"><a href="#三、项目的属性" class="headerlink" title="三、项目的属性"></a>三、项目的属性</h2><p>以下6个属性设置在项目上。</p>
<table width="400px"><tr><td bgcolor=lightgray><font color="black">1. order</font></br>
<font color="black">2. flex-grow</font></br>
<font color="black">3. flex-shrink</font></br>
<font color="black">4. flex-basis</font></br>
<font color="black">5. flex</font></br>
<font color="black">6. align-self</font>
</td></tr></table>

<h3 id="3-1-order属性"><a href="#3-1-order属性" class="headerlink" title="3.1 order属性"></a>3.1 order属性</h3><p>定义项目的排列顺序。数值越小，排列越靠前，默认为0。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  order: &lt;integer&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252067/blog/flex%E5%B8%83%E5%B1%80/flex-7_m0iefm.png" alt="image"></p>
<h3 id="3-2-flex-grow属性"><a href="#3-2-flex-grow属性" class="headerlink" title="3.2 flex-grow属性"></a>3.2 flex-grow属性</h3><p>定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  flex-grow: &lt;number&gt;; &#x2F;* default 0 *&#x2F;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252069/blog/flex%E5%B8%83%E5%B1%80/flex-8_isxbo3.png" alt="image"><br>如果所有项目的flex-grow属性都为1，则它们将等分剩余空间（如果有的话）。如果一个项目的flex-grow属性为2，其他项目都为1，则前者占据剩余空间将比其他项多一倍。</p>
<h3 id="3-3-flex-shrink属性"><a href="#3-3-flex-shrink属性" class="headerlink" title="3.3 flex-shrink属性"></a>3.3 flex-shrink属性</h3><p>定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  flex-shrink: &lt;number&gt; &#x2F;* default 1 *&#x2F;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252069/blog/flex%E5%B8%83%E5%B1%80/flex-9_o8sym1.png" alt="image"><br>如果所有项目的flex-shrink属性都为1，当空间不足时，都将等比列缩小。如果一个项目的flex-shrink属性为0，其他项目都为1，则空间不足时，前者不缩小。（负值对该属性无效）。</p>
<h3 id="4-4-flex-basis属性"><a href="#4-4-flex-basis属性" class="headerlink" title="4.4 flex-basis属性"></a>4.4 flex-basis属性</h3><p>定义了在分配多余空间之前，醒目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间，默认值为auto，即项目本来的大小。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  flex-basis: &lt;length&gt; | auto; &#x2F;* default auto *&#x2F;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以设为跟width或height属性一样的值，则项目将占据固定空间。</p>
<h3 id="3-5-flex属性"><a href="#3-5-flex属性" class="headerlink" title="3.5 flex属性"></a>3.5 flex属性</h3><p>是<font color="orange">flex-grow，flex-shrink和flex-basis</font>的缩写，默认值为<font color="orange">0 1 auto</font>，后两个属性可选。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  flex: none | [&lt;&#39;flex-grow&#39;&gt;&lt;&#39;flex-shrink&#39;&gt;? || &lt;&#39;flex-basis&#39;&gt;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该属性有两个快捷值：<font color="orange">auto(1 1 auto)</font>和<font color="orange">none(0 0 auto)</font><br>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值。</p>
<h3 id="3-6-align-self属性"><a href="#3-6-align-self属性" class="headerlink" title="3.6 align-self属性"></a>3.6 align-self属性</h3><p>align-self属性允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性。默认值为<font color="orange">auto</font>，表示继承父元素的align-items属性，如果没有父元素，则等同于<font color="orange">stretch</font>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  align-self: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://res.cloudinary.com/liran123456/image/upload/v1598252069/blog/flex%E5%B8%83%E5%B1%80/flex-10_d3uumu.png" alt="image"><br>该属性可取6个值，除了auto，其他都与align-items属性完全一致。</p>
 
      <!-- reward -->
      <!--  -->
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>

     
   
</article>

    
    <article
  id="post-正则表达式"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/07/06/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"
    >正则表达式</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/07/06/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="article-date">
  <time datetime="2020-07-06T03:07:54.000Z" itemprop="datePublished">2020-07-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/javascript/">javascript</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>因为在项目中需要对数据进行处理，使用sublime text非常方便，但是需要用到正则去增删改一些字符，之前都是用到的时候去查，趁有空还是想把正则整理一下，借鉴了一篇比较好的博客，传送门：<br><br><a href="https://juejin.im/post/5b5db5b8e51d4519155720d2" target="_blank" rel="noopener">可能是最好的正则表达式的教程笔记了吧…</a></p>
<h3 id="1-1-基本语法"><a href="#1-1-基本语法" class="headerlink" title="1.1 基本语法"></a>1.1 基本语法</h3><table>
<thead>
<tr>
<th>single char</th>
<th>quantifiers</th>
<th>position</th>
</tr>
</thead>
<tbody><tr>
<td>\d 匹配数字</td>
<td>* 0个或者更多</td>
<td>^ 一行的开头</td>
</tr>
<tr>
<td>\w 匹配word(数字、字母)</td>
<td>+ 1个或者更多，至少一个</td>
<td>$ 一行的结尾</td>
</tr>
<tr>
<td>\W 匹配非word(数字、字母)</td>
<td>? 0个或1个</td>
<td>\b 单词“结界”</td>
</tr>
<tr>
<td>\s 匹配white space(包括空格，tab等)</td>
<td>{min, max} 出现次数在一个范围内</td>
<td></td>
</tr>
<tr>
<td>\S 匹配非white space(包括空格，tab等)</td>
<td>{n} 匹配出现n次的</td>
<td></td>
</tr>
<tr>
<td>. 匹配任何的字符</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h4 id="1-1-1-single-char"><a href="#1-1-1-single-char" class="headerlink" title="1.1.1 single char"></a>1.1.1 single char</h4><ul>
<li>\w<br>将匹配所有word</li>
<li>\w\w\w 匹配连续一连串3个的字符串，所以三个字母的单词和6个字母的都可以匹配到</li>
<li>\s\s 匹配到一行中连续两个空格</li>
</ul>
<h4 id="1-1-2-position"><a href="#1-1-2-position" class="headerlink" title="1.1.2 position"></a>1.1.2 position</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">This is something</span><br><span class="line">is about</span><br><span class="line">a blah</span><br><span class="line">words</span><br><span class="line">sequence of words</span><br></pre></td></tr></table></figure>

<ul>
<li>\w+ 匹配所有的words</li>
<li>^\w+ 匹配到每一行开头的单词<font color="orange">This is a words sequence</font></li>
<li>\w+$ 匹配到每一行最后一个字母</li>
<li>如果想找n个字母组成的单词，则需要使用单词结界<font color="orange">\b\w{n}\b</font></li>
</ul>
<h4 id="1-1-3-电话号码匹配"><a href="#1-1-3-电话号码匹配" class="headerlink" title="1.1.3 电话号码匹配"></a>1.1.3 电话号码匹配</h4><p>常见的电话号码形式123-1234-5678<br>最基本的正则匹配为 <font color="orange">\d{3}-\d{4}-\d{4}</font><br>但电话号码有很多形式，有的是固话，有的中间是空格，有的中间没有间隔，多种情况的兼容，就要用到正则表达式中的<font color="orange">或</font> 或者其他表达方式。</p>
<h3 id="1-2-字符分类-char-class"><a href="#1-2-字符分类-char-class" class="headerlink" title="1.2 字符分类(char class)"></a>1.2 字符分类(char class)</h3><p>[] 这个符号表示逻辑关系<font color="orange">或</font>，例如[abc]表示a或者b或者c，[-.]表示符号-或者.（注意：.在[]中匹配的时候不需要用转义字符，但如果在外面，需要用转义字符\来匹配，即<font color="orange"> \.</font> ）</p>
<h4 id="1-2-1-简单应用"><a href="#1-2-1-简单应用" class="headerlink" title="1.2.1 简单应用"></a>1.2.1 简单应用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The lynk is quite a link don&#39;t you think? l nk l(nk</span><br></pre></td></tr></table></figure>

<p>正则表达式：<font color="orange">l[yi (]nk</font><br>结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lynk link l nk l(nk</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-匹配所有可能的电话号码"><a href="#1-2-2-匹配所有可能的电话号码" class="headerlink" title="1.2.2 匹配所有可能的电话号码"></a>1.2.2 匹配所有可能的电话号码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">915-134-3122</span><br><span class="line">643.123.1333</span><br><span class="line">(212)867-5509</span><br></pre></td></tr></table></figure>

<p>之前，我们利用<font color="orange">\d{3}-\d{4}-\d{4}</font>匹配来连字符的情况。<br>第一步：将<font color="orange">.</font>这种情况加进去，<font color="orange">\d{3}[-.]\d{4}[-.]\d{4}</font>；<br>第二步：匹配括号，可以用？，因为这是一个option选择，要么有，要么没有，<font color="orange">(?\d{3}[-.])?\d{4}[-.]\d{4}</font>。   </p>
<h4 id="1-2-3-的特殊语法"><a href="#1-2-3-的特殊语法" class="headerlink" title="1.2.3 []的特殊语法"></a>1.2.3 []的特殊语法</h4><ul>
<li>-连接符是第一个字符时<br>比如[-.]的含义是-或者.，但是如果当连字符不是第一个字符时，比如[a-z]，表示从字母a到z。</li>
<li>[]中的^<br>^在之前的介绍中表示一行开头，但是在[]中不同，[ab]表示a或者b，[^ab]表示除了a和b(anythings except a and b)，相当于取反。</li>
</ul>
<h4 id="1-2-4-和"><a href="#1-2-4-和" class="headerlink" title="1.2.4 []和()"></a>1.2.4 []和()</h4><p>()和[]一样也可以表示或逻辑，用法为(a|b)，表示a或b<br>example：匹配所有的email</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">adnfabgdaei@126.com</span><br><span class="line">mbvfid@google.net</span><br><span class="line">esfet@zju.edu</span><br></pre></td></tr></table></figure>
<p>思路：  </p>
<ol>
<li>任何一个以words开头的，一个或者更多 <font color="orange">\w+</font>；</li>
<li>紧接着是一个@符号 <font color="orange">\w+@</font>；</li>
<li>接着有一个或者多个words <font color="orange">\w+@\w+</font>；</li>
<li>接着有一个.  <font color="orange">\w+@\w+.</font>；</li>
<li>最后后缀为com，net或者edu <font color="orange">\w+@\w+.(com|net|edu)</font>。</li>
</ol>
<h4 id="1-2-5-总结"><a href="#1-2-5-总结" class="headerlink" title="1.2.5 总结"></a>1.2.5 总结</h4><ol>
<li><font color="orange">[]</font>的作用，表达或逻辑；</li>
<li><font color="orange">[-.(]</font> 表示-或.或(，如果连字符在中间如[a-z]，表示a-z；</li>
<li><font color="orange">[-.]</font> 中括号里的特殊字符不需要转义，就表示其本身；</li>
<li><font color="orange">[^ab]</font> 表示非，anything except a and b；</li>
<li><font color="orange">(a|b)</font> 也可以表示或逻辑，但是有着更强大的功能，接下来介绍。</li>
</ol>
<h3 id="1-3-分组捕获-capturing-groups"><a href="#1-3-分组捕获-capturing-groups" class="headerlink" title="1.3 分组捕获(capturing groups)"></a>1.3 分组捕获(capturing groups)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">212-555-1234</span><br><span class="line">915-412-1333</span><br></pre></td></tr></table></figure>
<p>按照之前的做法<font color="orange">\d{3}-\d{4}-\d{4}</font>，这种匹配的方式，是将整个电话号码作为一个组(group)匹配，可以把 212-555-1234 这样的叫Group0。<br>这个时候如果我们加了一个括号<font color="orange">\d{3}-(\d{4})-\d{4}</font>，那么匹配到的555就叫Group1，如果有两个小括号<font color="orange">\d{3}-(\d{4})-(\d{4})</font>，则分组情况如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">212-555-1234   Group0</span><br><span class="line">555            Group1</span><br><span class="line">1234           Group2</span><br></pre></td></tr></table></figure>
<h4 id="1-3-1-选择分组"><a href="#1-3-1-选择分组" class="headerlink" title="1.3.1 选择分组"></a>1.3.1 选择分组</h4><p>如何匹配分组？有两种方法：<br>第一种，使用$符号，比如<font color="orange">$1</font>代表<font color="orange">555</font>，<font color="orange">$2</font>代表<font color="orange">1234</font>；<br>第二种，使用<font color="orange"> \</font>,比如<font color="orange"> \1</font>代表<font color="orange">555</font>.</p>
<h4 id="1-3-2-实景训练"><a href="#1-3-2-实景训练" class="headerlink" title="1.3.2 实景训练"></a>1.3.2 实景训练</h4><ol>
<li><p>现在有一个名单列表，但是姓和名是反的，需要交换过来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shiffina, Daniel</span><br><span class="line">shifafl, Daniell</span><br><span class="line">shquer, Danny</span><br></pre></td></tr></table></figure>
<p>&nbsp;&nbsp;&nbsp;&nbsp;实现方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reg: (\w+),\s(\w+)</span><br><span class="line">replace: $2 $1</span><br></pre></td></tr></table></figure>
<p>注意：<font color="orange">$0</font>指的是所有都匹配到，所以匹配第一个括号是<font color="orange">$1</font></p>
</li>
<li><p>匹配link标签并替换为html标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[google](http:&#x2F;&#x2F;google.com)</span><br><span class="line">[itp](http:&#x2F;&#x2F;itp.nyi.edu)</span><br><span class="line">[coding Rainbow](http:&#x2F;&#x2F;codingrainbow.com)</span><br></pre></td></tr></table></figure>
<p>第一个考虑匹配[google]，想到正则表达式<font color="orange">\[.*]</font>,这个确实能正确匹配到上面到三条，但是如果文本是下面这样的</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[google](http:&#x2F;&#x2F;google.com), [test]</span><br><span class="line">[itp](http:&#x2F;&#x2F;itp.nyi.edu)</span><br><span class="line">[coding Rainbow](http:&#x2F;&#x2F;codingrainbow.com)</span><br></pre></td></tr></table></figure>
<p>则第一行的内容会全部匹配，不能区分[google]和[test]，这是因为<font color="orange">.</font>是贪婪的，一直匹配到这一行最后一个<font color="orange">]</font>才停止，我们可以使用<font color="orange">？</font>来去掉这种贪婪的属性。<br>正确的完整匹配：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reg: \[(.*?)\]\((http.*?)\)</span><br><span class="line">replace: &lt;a href&#x3D;&quot;$2&quot;&gt;$1&lt;&#x2F;a&gt;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="1-3-3-总结"><a href="#1-3-3-总结" class="headerlink" title="1.3.3 总结"></a>1.3.3 总结</h4><ol>
<li>分组捕获，使用()进行数据分组，编号0代表整个匹配项，选择的分组从编号1开始；</li>
<li>选择器可以使用<font color="orange">$1</font>和<font color="orange">\1</font>，但是使用场景不同，<font color="orange">\1</font>用在正则表达式自己身上；</li>
<li><font color="orange">？</font>可以禁止贪婪属性，放在<font color="orange">.*</font>之后，表示一次匹配遇到就可以停止，否则将会一直向后匹配。</li>
</ol>
<h3 id="1-4-在JavaScript中的应用"><a href="#1-4-在JavaScript中的应用" class="headerlink" title="1.4 在JavaScript中的应用"></a>1.4 在JavaScript中的应用</h3><h4 id="1-4-1-reg-test"><a href="#1-4-1-reg-test" class="headerlink" title="1.4.1 reg.test()"></a>1.4.1 reg.test()</h4><p>正则表达式本身有一个test的方法，这个方法只能测试是否包含，返回一个bool变量。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="regexp">/\d&#123;3&#125;/</span>;</span><br><span class="line"><span class="keyword">var</span> a = <span class="string">'123'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'123ABC'</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="string">'abc'</span>;</span><br><span class="line"></span><br><span class="line">r.test(a)  <span class="comment">//true</span></span><br><span class="line">r.test(b) <span class="comment">//true</span></span><br><span class="line">r.test(c) <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-2-str-match"><a href="#1-4-2-str-match" class="headerlink" title="1.4.2 str.match()"></a>1.4.2 str.match()</h4><p>与test()不同，不只是返回bool变量，会返回你所匹配到的内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> r = <span class="regexp">/compus/</span></span><br><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/w+/</span></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">"compus, I know something about you"</span></span><br><span class="line">r.test(s)  <span class="comment">//true</span></span><br><span class="line">s.match(r)  <span class="comment">//["compus"]</span></span><br><span class="line">s.match(reg) <span class="comment">//["compus"]</span></span><br></pre></td></tr></table></figure>
<p>为什么最后一个返回的也是”compus”？<br>实际上，match()返回了第一个可以匹配的序列。想要实现之前的效果，就要用到JS里关于正则的几个flag：<br>|flag|含义<br>|–|–<br>|g|全部匹配<br>|i|忽略大小写<br>|m|多行匹配<br>|<br>所以为了解决刚才的问题，只要这样设置reg就可以了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> reg = <span class="regexp">/w+/g</span></span><br></pre></td></tr></table></figure>
<p>练习</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> r = <span class="regexp">/\d&#123;3&#125;[-.]\d&#123;4&#125;/</span></span><br><span class="line"><span class="keyword">var</span> rg = <span class="regexp">/\d&#123;3&#125;[-.]d&#123;4&#125;/g</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.match(r)); <span class="comment">//["111-2313"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(rg));<span class="comment">//["111-2313","133-2311"]</span></span><br></pre></td></tr></table></figure>
<p>那么match会返回分组吗？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sr = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/</span></span><br><span class="line"><span class="keyword">var</span> srg = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/g</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(str.match(sr)); <span class="comment">//["111-2313","111"]</span></span><br><span class="line"><span class="built_in">console</span>.log(str.match(srg)); <span class="comment">//["111-2313","133-2311"]</span></span><br></pre></td></tr></table></figure>
<p>结论：当使用了全局flag<font color="orange">g</font>的时候，不会返回分组，而是全部的匹配结果；如果没有使用<font color="orange">g</font>，会将匹配到的结果和分组以数组的形式返回。</p>
<h4 id="1-4-3-reg-exec"><a href="#1-4-3-reg-exec" class="headerlink" title="1.4.3 reg.exec()"></a>1.4.3 reg.exec()</h4><p>这个方法可以实现全局匹配，并返回分组的结果。</p>
<p>reg.exec()每次调用，返回一个匹配的结果，匹配结果和分组以数组的形式返回，不断的调用即可返回下一个结果，直到返回<font color="orange">null</font></p>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span> ;</span><br><span class="line"><span class="keyword">var</span> srg = <span class="regexp">/(\d&#123;3&#125;)[-.]\d&#123;4&#125;/g</span>;</span><br><span class="line"><span class="keyword">var</span> result = srg.exec(str);</span><br><span class="line"><span class="keyword">while</span>(result !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result);</span><br><span class="line">    result = srg.exec(str);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>result包含的内容可能比想象中的多，是一个数组，比如第一次执行结果为：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">"133-2311"</span>, <span class="string">"133"</span>, <span class="attr">index</span>: <span class="number">36</span>, </span><br><span class="line">input: <span class="string">"Here is a Phone Number 111-2313 and 133-2311"</span> groups: <span class="literal">undefined</span>]</span><br></pre></td></tr></table></figure>

<h4 id="1-4-4-str-split"><a href="#1-4-4-str-split" class="headerlink" title="1.4.4 str.split()"></a>1.4.4 str.split()</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"unicorns and rainbows And, Cupcakes"</span></span><br></pre></td></tr></table></figure>
<p>将上面的字符串分割成单词，首先可以用空格分隔开：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = s.split(<span class="string">' '</span>);</span><br><span class="line"><span class="keyword">var</span> result1 = s.split(<span class="regexp">/\s/</span>);</span><br><span class="line"><span class="comment">// 两个是完全一样的效果</span></span><br><span class="line"><span class="comment">// "unicorns", "and", "rainbows", "And,", "Cupcakes"]</span></span><br></pre></td></tr></table></figure>
<p>但是这样并不符合要求，因为有”And,”，所以要用正则，匹配条件是逗号或空格。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> result = s.split(<span class="regexp">/[,\s]+/</span>);</span><br><span class="line"><span class="comment">// ["unicorns", "and", "rainbows", "And", "Cupcakes"]</span></span><br></pre></td></tr></table></figure>
<p>拓展：实现段落的单词分割</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">"Hello,My name is Vincent. Nice to Meet you!What's your name? Haha."</span></span><br></pre></td></tr></table></figure>
<p>可以使用以下正则</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">result = s.split(<span class="regexp">/[,.!?\s]+/</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更简单的方法</span></span><br><span class="line">result = s.split(<span class="regexp">/\W+/</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果想将一个段落的句子都隔开（而不是碰到单词就隔开）</span></span><br><span class="line">result = s.split(<span class="regexp">/[.,!?]+/</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果分隔的时候想要保留分隔符，只要给匹配的内容分组即可</span></span><br><span class="line"><span class="keyword">var</span> result = s.split(<span class="regexp">/([.,!?]+)/</span>)</span><br><span class="line"><span class="comment">//["Hello", ",", "My name is Vincent", ".", " Nice to Meet you", "!", "What's your name", "?", " Haha", ".", ""]</span></span><br></pre></td></tr></table></figure>

<h4 id="1-4-5-str-replace"><a href="#1-4-5-str-replace" class="headerlink" title="1.4.5 str.replace()"></a>1.4.5 str.replace()</h4><p>基本用法是<font color="orange">str.replace(reg, replace|function)</font>，第一个参数是正则表达式，代表匹配的内容，第二个参数是替换的字符串或者一个回调函数。（注意：replace不会修改原字符串，只是返回一个修改后的字符串；除此外，如果没有使用<font color="orange">g</font>标志，只匹配/替换第一个。）  </p>
<ol>
<li>最简单的替换<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 替换一个序列中的元音字母(aeiou)，将其替换成一个double。 比如x-&gt;xx</span></span><br><span class="line">  <span class="keyword">var</span> s = <span class="string">"Hello,My name is Vincent."</span></span><br><span class="line"><span class="keyword">var</span> result = s.replace(<span class="regexp">/([aeiou])/g</span>,<span class="string">"$1$1"</span>)</span><br><span class="line"><span class="comment">//"Heeloo,My naamee iis Viinceent."</span></span><br></pre></td></tr></table></figure></li>
<li>function参数<br>demo<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将四个字母的单词变为大写</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> s = <span class="string">"Hello,My name is Vincent. What is your name?"</span></span><br><span class="line"><span class="keyword">var</span> newStr = s.replace(<span class="regexp">/\b\w&#123;4&#125;\b/g</span>,replacer)</span><br><span class="line"><span class="built_in">console</span>.log(newStr)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replacer</span>(<span class="params">match</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(match);</span><br><span class="line">    <span class="keyword">return</span> match.toUpperCase();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Hello,My NAME is Vincent. WHAT is YOUR NAME?</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="1-4-6-练习"><a href="#1-4-6-练习" class="headerlink" title="1.4.6 练习"></a>1.4.6 练习</h4><ul>
<li>判断一个字符串中出现次数最多的字符，并统计次数<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> s = <span class="string">'aaabbbcccaaabbbaaa'</span>;</span><br><span class="line"><span class="keyword">var</span> a = s.split(<span class="string">''</span>).sort().join(<span class="string">""</span>);  </span><br><span class="line"><span class="comment">// "aaaaaaaaabbbbbbccc"</span></span><br><span class="line"><span class="keyword">var</span> ans = a.match(<span class="regexp">/(\w)\1+/g</span>); </span><br><span class="line"><span class="comment">// ["aaaaaaaaa", "bbbbbb", "ccc"]</span></span><br><span class="line">ans.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.length - b.length;</span><br><span class="line">&#125;) </span><br><span class="line"><span class="comment">// ["ccc", "bbbbbb", "aaaaaaaaa"]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'ans is : '</span> + ans[ans.length<span class="number">-1</span>])</span><br></pre></td></tr></table></figure></li>
<li>给数字加千分位分隔符  </li>
</ul>
<p>方法一</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">numFormat</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//将数字按 "."分割成2部分。处理"."之前的部分</span></span><br><span class="line">        <span class="keyword">let</span> splitStr = num.toString().split(<span class="string">"."</span>);</span><br><span class="line">        <span class="keyword">let</span> newStr = splitStr[<span class="number">0</span>].split(<span class="string">""</span>).reverse().join(<span class="string">""</span>)</span><br><span class="line">          .replace(<span class="regexp">/([0-9]&#123;3&#125;)/g</span>, <span class="string">"$1,"</span>).split(<span class="string">""</span>)</span><br><span class="line">          .reverse().join(<span class="string">""</span>);</span><br><span class="line">        <span class="comment">//如果有小数点之后的部分,就拼接</span></span><br><span class="line">        <span class="keyword">if</span> (splitStr[<span class="number">1</span>]) &#123;</span><br><span class="line">          newStr += <span class="string">"."</span> + splitStr[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> newStr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>方法二（参考：<a href="https://juejin.im/post/5abb5b01f265da237f1e5a92" target="_blank" rel="noopener">把一串数字表示成千位分隔形式——JS正则表达式的应用</a>）<br>思路：<br>因为需要从右向左匹配，所以结尾必须有<font color="orange">$</font>字符。三位数字用<font color="orange">\d{3}</font>表示，由于我们不知道有多少组这样的数字，所以需要用<font color="orange">\d{3}+</font>来匹配任何包含至少一组三位数字的字符串。所以<font color="orange">/(\d{3})+$/g</font>表示作为结尾的3个或者3的倍数个数字。<br>由于要替换的是每三位数字（从末尾起）前面紧挨的<font color="orange">“”</font>，所以需要用到正向预查，即<font color="orange">?=n</font>（匹配任何其后紧跟指定字符串n的字符串）。关于正向预查的用法，这里举个例子：将字符串<font color="orange">“abaaaaa”</font>中后面给这字符b的那个字符a表示处理啊，于是可以像下面这样写：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"abaaaaa"</span>,</span><br><span class="line">    reg = <span class="regexp">/a(?=b)/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg)); <span class="comment">// ["a"]</span></span><br></pre></td></tr></table></figure>
<p>现在回到我们千分位的问题中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"10000000000"</span>,</span><br><span class="line">    reg = <span class="regexp">/(?=(\d&#123;3&#125;)+$)/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.match(reg)); <span class="comment">// ["", "", ""]</span></span><br></pre></td></tr></table></figure>
<p>为什么<font color="orange">(?=…)</font>前面什么也不写？因为我们要找的是哪些后面紧跟着三位数字的<font color="orange">“”</font>，空当然什么都不用写。接着我们就对这三个空进行替换：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"10000000000"</span>,</span><br><span class="line">    reg = <span class="regexp">/(?=(\d&#123;3&#125;)+$)/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.replace(reg, <span class="string">","</span>)); <span class="comment">// 10,000,000,000</span></span><br></pre></td></tr></table></figure>
<p>但是！如果是12为数字呢，12是3的倍数，来看一下结果有什么不同：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"100000000000"</span>,</span><br><span class="line">    reg = <span class="regexp">/(?=(\d&#123;3&#125;)+$)/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.replace(reg, <span class="string">","</span>)); <span class="comment">// ,100,000,000,000</span></span><br></pre></td></tr></table></figure>
<p>可以发现多了一个<font color="orange">,</font>。怎么解决呢？在<font color="orange">\d</font>前面加一个非单词边界<font color="orange">\B</font>，用来表示所匹配的这个空后面不能是一个单词边界，这样就可以把最前面的<font color="orange">,</font>去掉。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">"100000000000"</span>,</span><br><span class="line">    reg = <span class="regexp">/(?=(\B\d&#123;3&#125;)+$)/g</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.replace(reg, <span class="string">","</span>)); <span class="comment">// 100,000,000,000</span></span><br></pre></td></tr></table></figure>

<h3 id="1-5-总结"><a href="#1-5-总结" class="headerlink" title="1.5 总结"></a>1.5 总结</h3><ul>
<li><font color="orange">g</font>表示全局匹配的修饰符，全局匹配指查找所有匹配而非在找到第一个匹配后停止。</li>
<li><font color="orange">$</font>表示结尾的量词，如<font color="orange">n$</font>，匹配的是任何以n为结尾的字符串。</li>
<li><font color="orange">\d</font>是查找数字的元字符。</li>
<li><font color="orange">n{X}</font>是匹配包含X个n的序列的字符串的量词。</li>
<li><font color="orange">n+</font>是匹配任何包含至少一个n的字符串的量词。</li>
<li><font color="orange">?=n</font>正向预查，用于匹配任何其后紧接着指定字符串n的字符串。</li>
<li><font color="orange">match()</font> String对象的方法，作用是找到一个或多个正则表达式的匹配。</li>
<li><font color="orange">replace()</font> String对象的方法，作用是替换与正则表达式匹配的字串。</li>
<li><font color="orange">\B</font>是表示匹配非单词边界的元字符，与其互为补集的元字符是<font color="orange">\b</font>，表示匹配单词边界。</li>
</ul>
 
      <!-- reward -->
      <!--  -->
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/study/" rel="tag">study</a></li></ul>

    </footer>
  </div>

     
   
</article>

    
    <article
  id="post-hello-world"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/07/04/hello-world/"
    >Hello World</a> 
</h2>
 

    </header>
     
    <div class="article-meta">
      <a href="/2020/07/04/hello-world/" class="article-date">
  <time datetime="2020-07-04T12:10:11.847Z" itemprop="datePublished">2020-07-04</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
 
      <!-- reward -->
      <!--  -->
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

     
   
</article>

    
  </article>
  

  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2020
        <i class="ri-heart-fill heart_icon"></i> John Doe
      </li>
    </ul>
    <ul>
      <li>
        
        
        
        Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
        <span class="division">|</span>
        Theme - <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></s>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
      <div class="float_btns">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

      </div>
    </main>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="Cherry Blog"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%97%85%E8%A1%8C/">旅行</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://shenyu-vip.lofter.com" target="_blank" rel="noopener">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/introduction">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <script>
      if (window.matchMedia("(max-width: 768px)").matches) {
        document.querySelector('.content').classList.remove('on');
        document.querySelector('.sidebar').classList.remove('on');
      }
    </script>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/img/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>

<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->


<link rel="stylesheet" href="/css/clipboard.css">

<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>


<!-- CanvasBackground -->


    
  </div>
</body>

</html>